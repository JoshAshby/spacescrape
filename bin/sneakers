#!/usr/bin/env ruby

require_relative '../spacescrape'
require 'sneakers/runner'

workers = Workers.constants.map do |c|
  const = Workers.const_get c

  next unless const.ancestors.include? Sneakers::Worker
  next unless const.queue_name

  const
end.compact

puts "Starting up sneakers workers: #{ workers }"

r = Sneakers::Runner.new workers
r.run
